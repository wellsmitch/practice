<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/axios/0.19.0-beta.1/axios.min.js"></script>
<body>
<!--<form enctype="multipart/form-data" action="http://192.168.8.245:3000/users/uploader" method="post">-->
    <!--<input type="file" name="avatar" id="fileself" onchange="tap1()">-->
    <!--<input type="submit" id="btn" value="send">-->
<!--</form>-->
<form id="fo">
    <input type="text"name="username" id="username">
    <input type="text" name="pw" id="pw">
    <input type="file"  id="fi" multiple="multiple">
</form>
<input type="button" id="button" value="tttt">

<script type="text/javascript">
    var files1 = null;

    function tap1() {
        console.log(9999);
        files1 = document.querySelector('#fileself').files[0]
    }
  // $('#btn').click(function () {
  //     //console.log(document.querySelector('#fileself').files[0]);
  //     var file = new FormData();
  //     console.log(file);
  //     file.append('avatar',files1);
  //     console.log(file);
  //     $.ajax({
  //         type:'post',
  //         url: 'http://192.168.8.184:3000/users/uploader',
  //         data:file,
  //         processData: false,  // 不处理数据
  //         success:function (data) {
  //             console.log(data)
  //         }
  //     })
  // })
    $.ajax({
    		type:"get",
    		url:"https://www.layui.com/demo/table/user/?page=3&limit=10",
    		async:true,
    		success:function(data) {
    			console.log(data)
    		}
    	});
    $('#button').click(function () {
        var te = new FormData();
        var te =  new FormData(document.querySelector('#fo'));
        console.log(document.querySelector('#fi').files);
        for (var i = 0;i<document.querySelector('#fi').files.length;i++) {
            te.append('avatar',document.querySelector('#fi').files[i]);
        }

        te.append('name',$('#username').val());
        te.append('pw',$('#pw').val());

axios({
    method: 'get',
    url: "http://jx.xuzhixiang.top/ap/api/goods/goods-add.php",

    // headers: {
    //     a: 123
    // },
    onUploadProgress: function (progressEvent) { //原生获取上传进度的事件
        if (progressEvent.lengthComputable) {
            //属性lengthComputable主要表明总共需要完成的工作量和已经完成的工作是否可以被测量
            //如果lengthComputable为false，就获取不到progressEvent.total和progressEvent.loaded
            // callback1(progressEvent);
            console.log(progressEvent);
        }

    },
    data: {
        pimg : '123456',
        pname : '图片1',
        pprice : 100,
        pdesc: 'pic message'
    }
    // data: te,
        })
    .then(function (a) {
        console.log(a);
    })
// debugger
//         $.ajax({
//             type:"post",
//             url:"http://localhost:3000/users/login",
//             // headers: {
//             //     'content-type': 'application/x-www-form-urlencoded',
//             //     'token': 'sssss'
//             // },
//             data:
//             te,
//             //     {
//             // 	    name:123456,
//             //     pw:123456
//             // },
//             xhr: function() {
//                 var myXhr = $.ajaxSettings.xhr()
//                 if(myXhr.upload) {
//                     myXhr.upload.addEventListener('progress', function (e) {
//                         console.log(e)
//                     }, false)
//                 }
//                 return myXhr
//             },
//             processData: false,  // 不处理数据
//             contentType: false ,  // 不设置内容类型 formdata 格式上传时候需要设置
//             /*\
//             *
//             *  contentType: false,
//                         processData: false,
//                         cache: false,
//                         dataType: 'json',*/
//             async:true,
//             success:function(data) {
//                 console.log(data);
//             }
//         });
    });


	// $.ajax({
	// 		type:"get",
	// 		url:"http://jx.xuzhixiang.top/ap/api/productlist.php",
	// 		async:true,
	// 		success:function(data) {
    //             console.log(data);
    //         }
	// 	});
    // let tol = new FormData();
    // tol.append('mobile', 18239081715);
    // tol.append('event','register');
// $.ajax({
// 		type:"post",
// 		url:"http://zhuang.tainongnongzi.com/api/sms/send",
//     data:tol.serialize(),
//     processData: false,
//     async:true,
// 		success:function(data) {
//             console.log(data);
//         }
// 	});
// $.ajax({
//     type:"post",
//     url:"http://zhuang.tainongnongzi.com/api/sms/send",
//     data:{
//         mobile:'18239081715',
//         event:'register'
//     },
//     processData: true,
//     async:true,
//     success:function(data) {
//         console.log(data);
//     }
// 	});

</script>
</body>
</html>
