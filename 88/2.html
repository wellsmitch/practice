
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="description" content="imagetracer.js照片变成矢量SVG图片 » 张鑫旭-鑫空间-鑫生活" />
    <meta name="description" content="web前端学习实例页面之imagetracer.js照片变成矢量SVG图片" />
    <meta name="keywords" content="imagetracer.js, imagetracer, svg, 图片, 矢量" />
    <meta name="author" content="张鑫旭, zhangxinxu" />
    <title>imagetracer.js照片变成矢量SVG图片 » 张鑫旭-鑫空间-鑫生活</title>
    <!--<link rel="stylesheet" href="../css/demo.css" type="text/css" />-->
    <!--<link rel="stylesheet" href="../css/hl.css" type="text/css" />-->
    <style>
        *{margin: 0;padding: 0}
        #iconsvg{display:inline-block;}
    </style>
</head>

<body>


<div id="main">

    <div id="body">
        <div id="effect" class="part">

            <div class="show">
                <div class="demo">
                    <img id="IMG" src="33.jpeg" width="250" height="188">
                    <div style="position: relative;">
                        <div id="svgcontainer"></div>
                        <div style="position: absolute;top: 0;left: 0;">
                            <svg id="ctr" width='500' height='500'>
                                <!--<polyline points='220,10 300,210 170,250 123,234' fill='none' stroke='#000' stroke-width='10'></polyline>-->
                                <polyline id="moreLine" points="" fill='none' stroke='#1269d3' stroke-width='5'></polyline>
                                <polygon id="box" points='' fill='#607d8b' stroke='#000' stroke-width='5'></polygon>
                            </svg>
                        </div>
                    </div>

                    <!--<img src="33.jpeg" width="160" height="160">-->
                    <!--<span id="iconsvg"></span>-->
                </div>
            </div>
        </div>
        <button id="btn">按钮</button>

    </div>
</div>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script src="./imagetracer_v1.2.1.js"></script>
<script>

    // function asv(){
        ImageTracer.imageToSVG(
            'sss.jpg',
            // 'https://images2015.cnblogs.com/blog/1016352/201703/1016352-20170313131540432-1942971531.png',
            function(svgstr){ ImageTracer.appendSVGString( svgstr, 'svgcontainer' ); },
            {numberofcolors: 256, scale:.5},
            'Curvy'
        );
    // }
    function asv() {
       return  $.ajax({
                    type:'get',
                    success:function(data){
                        return 22222
                    }
                })
    }

    function ff() {
        document.querySelector('#ctr').setAttribute('width',512);
        document.querySelector('#ctr').setAttribute('height',480);
        var pointsString = [];
        function move(e){
            var s = e.offsetX+'#'+e.offsetY;
            pointsString.push(s);
        }
        ctr.onmousedown = function (e) {
            console.log(e.button,662255);
            var p = '';
            if(e.button == 0){
                move(e);
                var str = pointsString.join(' ');
                p = str.replace(/#/g,',');
                window.strr = p;
                console.log(window.strr,778899);
                moreLine.setAttribute("points",p);
            }
            if(e.button == 2){
                console.log(window.strr,333333);
                box.setAttribute("points",window.strr);
                box.onmouseenter = function () {
                    alert('划入了')
                };
                box.onmouseleave = function () {
                    alert('划chu了')
                };
            }

        };
    }
    async function test() {
        let result1 = await asv();
        let result2 = await ff(result1);
    }

    test();
    // ImageTracer.imageToSVG(
    //     '33.jpeg',
    //     function(svgstr){ ImageTracer.appendSVGString( svgstr, 'iconsvg' ); },
    //     { ltres:0.1, qtres:0.1, scale:10, strokewidth:0, numberofcolors: 4 }
    // );
</script>


</body>
</html>
