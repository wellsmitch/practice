<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>修改节点属性</title>
    <link rel="stylesheet" href="css/metroStyle/metroStyle.css">
    <script src="js/jquery-1.4.4.min.js"></script>
    <script src="js/jquery.ztree.all.min.js"></script>
</head>
<body>
<div class="ztree" id="out"></div>
<button id="editNode">修改节点属性</button>
<button id="getRes">获取最终的属性</button>
<script type="text/javascript">
    /**
     * var nodes = treeObj.getNodes();
     if (nodes.length>0) {
	nodes[0].name = "test";
	treeObj.updateNode(nodes[0]);
}
     * */
    var setting = {
        data: {
            simpleData: {
                enable: true,
                idKey: 'id',
                pIdKey: 'pId'
            }
        },
        callback: {
            onClick: function (a, b, c, d) {
                console.log(a, b, c, d);
                c.name = "test";
                zTreeObj.updateNode(c);
                // console.log(zTreeObj.transformToArray(zTreeObj.getNodesByParam("id", "123", null)));
            }
        }
    };
    var zTreeNodes = [
        {
            id: 1,
            pId: 0,
            name: "根 Root",
            open: true,
            iconOpen: 'css/zTreeStyle/img/diy/1_open.png',
            iconClose: 'css/zTreeStyle/img/diy/1_close.png'
        },
        {id: 11, pId: 1, name: "父节点 1-1"},
        {id: 111, pId: 11, name: "叶子节点 1-1-1"},
        {id: 112, pId: 11, name: "叶子节点 1-1-2"},
        {id: 113, pId: 11, name: "叶子节点 1-1-3"},
        {id: 114, pId: 11, name: "叶子节点 1-1-4"},
        {id: 12, pId: 1, name: "父节点 1-2"},
        {id: 121, pId: 12, name: "叶子节点 1-2-1"},
        {id: 122, pId: 12, name: "叶子节点 1-2-2"},
        {id: 123, pId: 12, name: "叶子节点 1-2-3"},
        {id: 124, pId: 12, name: "叶子节点 1-2-4"}
    ];
    var zTreeObj = $.fn.zTree.init($("#out"), setting, zTreeNodes);
    $('#getRes').click(function () {
        var nodes = zTreeObj.transformToArray(zTreeObj.getNodes());
        console.log(nodes);
    });
</script>
</body>
</html>