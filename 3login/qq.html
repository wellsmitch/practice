<html>
<head>
    <title>Client Flow Example</title>
    <meta charset="utf-8">
</head>
<body>
<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<!--100229030-->
<script type="text/javascript" src="http://qzonestyle.gtimg.cn/qzone/openapi/qc_loader.js" data-appid="100229030" charset="utf-8"></script>
<span id="qqLoginBtn"></span>
<!--SDK: http://qzonestyle.gtimg.cn/qzone/openapi/js-sdk-demo.html -->
<!-- http://wiki.connect.qq.com/js_sdk%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E#3..E8.87.AA.E5.AE.9A.E4.B9.89.E7.99.BB.E5.BD.95.E6.8C.89.E9.92.AE -->
<input type="button" value=" 获取 " onclick="getInfo();">
<button style="margin-top: 300px;">aaaaaaaa</button>
<!--https://graph.qq.com/oauth2.0/show?which=Login&display=pc&client_id=100229030&response_type=token&scope=all&redirect_uri=http%3A%2F%2Fqzonestyle.gtimg.cn%2Fqzone%2Fopenapi%2Fredirect-1.0.1.html-->
<!--https://justcoding.iteye.com/blog/2030743-->
<script type="text/javascript">
	$('button').click(function() {
		location.href = 'b.html#c'
	})
    // QC.Login({
    //     btnId:"qqLoginBtn"	//插入按钮的节点id
    // });
    //
    // //  只要 QC.Login 触发  下面函数会自动触发
    // var paras = {};
    //     QC.api("get_user_info", paras)
    //         .success(function(s){//成功回调
    //             console.log(s);
    //             console.log(JSON.parse(s.dataText));
    //             // alert("获取用户信息成功！当前用户昵称为："+s.data.nickname);
    //         })
    //         .error(function(f){//失败回调
    //             alert("获取用户信息失败！");
    //         })
    //         .complete(function(c){//完成请求回调
    //             alert("获取用户信息完成！");

    //         });


</script>


<script type="text/javascript">
    //调用QC.Login方法，指定btnId参数将按钮绑定在容器节点中
    QC.Login({
            //btnId：插入按钮的节点id，必选
            btnId:"qqLoginBtn",
            //用户需要确认的scope授权项，可选，默认all
            scope:"all",
            //按钮尺寸，可用值[A_XL| A_L| A_M| A_S|  B_M| B_S| C_S]，可选，默认B_S
            size: "A_XL"
        }, function(reqData, opts){//登录成功
            //根据返回数据，更换按钮显示状态方法
        console.log(reqData, opts);
        let dom = document.getElementById(opts['btnId']),
                _logoutTemplate=[
                    //头像
                    '<span><img src="{figureurl}" class="{size_key}"/></span>',
                    //昵称
                    '<span>{nickname}</span>',
                    //退出
                    '<span><a href="javascript:QC.Login.signOut();">退出</a></span>'
                ].join("");
            dom && (dom.innerHTML = QC.String.format(_logoutTemplate, {
                nickname : QC.String.escHTML(reqData.nickname), //做xss过滤
                figureurl : reqData.figureurl
            }));
        }, function(opts){//注销成功
            alert('QQ登录 注销成功');
        }
    );

let a = {};
function a_ () {
    console.log(a);
}

    QC.Login.getMe(function(openId, accessToken){
        // console.log(openId, accessToken);
        a.openId = openId;
        a.accessToken = accessToken;
        a_()
    });
</script>
</body>
</html>
